<div class="rule-config glass-card">
    <div class="panel-header">
        <h3>Threshold Rules</h3>
        <button class="btn-primary" (click)="toggleAddForm()">
            {{ showAddForm ? 'Cancel' : '+ Add Rule' }}
        </button>
    </div>

    <div class="add-rule-form" *ngIf="showAddForm">
        <div class="form-group">
            <label>Rule Name</label>
            <input type="text" [(ngModel)]="newRule.name" placeholder="e.g., High Temperature Alert" />
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Sensor Type</label>
                <select [(ngModel)]="newRule.sensorType">
                    <option *ngFor="let type of sensorTypes" [value]="type">
                        {{ type | titlecase }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Condition</label>
                <select [(ngModel)]="newRule.condition">
                    <option *ngFor="let cond of conditions" [value]="cond">
                        {{ getConditionLabel(cond) }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Threshold</label>
                <input type="number" [(ngModel)]="newRule.threshold" placeholder="0" />
            </div>

            <div class="form-group">
                <label>Severity</label>
                <select [(ngModel)]="newRule.severity">
                    <option *ngFor="let sev of severities" [value]="sev">
                        {{ sev | titlecase }}
                    </option>
                </select>
            </div>
        </div>

        <button class="btn-primary" (click)="addRule()">
            Create Rule
        </button>
    </div>

    <div class="rules-list">
        <div *ngFor="let rule of rules" class="rule-item" [class.disabled]="!rule.enabled">
            <div class="rule-info">
                <div class="rule-header">
                    <span class="rule-name">{{ rule.name }}</span>
                    <span class="rule-badge" [class]="getSeverityClass(rule.severity)">
                        {{ rule.severity | titlecase }}
                    </span>
                </div>
                <div class="rule-details">
                    <span class="sensor-type">{{ rule.sensorType | titlecase }}</span>
                    <span class="condition">{{ getConditionLabel(rule.condition) }} {{ rule.threshold }}</span>
                </div>
            </div>
            <div class="rule-actions">
                <button class="btn-toggle" (click)="toggleRule(rule.id)" [class.active]="rule.enabled">
                    {{ rule.enabled ? 'ON' : 'OFF' }}
                </button>
                <button class="btn-delete" (click)="deleteRule(rule.id)">
                    üóëÔ∏è
                </button>
            </div>
        </div>

        <div class="empty-state" *ngIf="rules.length === 0">
            <p>No rules configured</p>
            <span class="empty-icon">‚öôÔ∏è</span>
        </div>
    </div>
</div>